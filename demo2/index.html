<!DOCTYPE ><html lang="en"><head>    <meta charset="UTF-8" />    <title>智能考勤系统</title>    <meta name="applicable-device"content="pc,mobile"/>    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    <meta name="renderer" content="webkit">    <link rel="stylesheet" type="text/css" href="css/reset.css">    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">    <link href="css/datepicker3.css" rel="stylesheet">    <link rel="stylesheet" href="css/styles.css">    <link rel="stylesheet" href="css/style.css">    <script src="js/lab.js"></script>    <script>        $LAB.script("js/jquery.min.js").wait()            // 引入插件js-                .script("js/bootstrap.min.js")                .script("js/director.min.js")                .script("js/bootstrap-datepicker.js")                .script("js/vue.js")                .wait()                // 引入数据js                .script("js/WSN/camera-1.1.js")                .script("js/WSN/WSNCamera.js")                .script("js/WSN/WSNRTConnect.js")                .wait()                .script("js/config.js").wait()                .script("js/script.js?v=170622")    </script></head><body><div class="page-content">    <div class="row">        <div class="col-md-2">            <div class="sidebar content-box">                <ul class="nav">                    <li class="nav-li" id="homeLi"><a href="#/home"><i class="glyphicon glyphicon-home"></i>&nbsp;&nbsp;&nbsp;&nbsp;运营主页</a></li>                    <li class="nav-li" id="recordLi"><a href="#/record"><i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;&nbsp;&nbsp;考勤历史</a></li>                    <li class="nav-li" id="configLi"><a href="#/config"><i class="glyphicon glyphicon-stats"></i>&nbsp;&nbsp;&nbsp;&nbsp;数据配置</a></li>                    <li class="nav-li" id="setLi"><a href="#/set/idSet"><i class="glyphicon glyphicon-link"></i>&nbsp;&nbsp;&nbsp;&nbsp;连接设置</a></li>                </ul>            </div>        </div>        <div class="col-md-10">            <!--运营主页-->            <div class="content-box-large panel" id="home">                <div class="panel-body text-center curCouseBody">                    <br/>                    <div class="curCourse">                        <div class="noShowCurCourse" v-if="!showCurCourse">                            <span class="noShow">当前无课程</span>                            <br/>                            <br/>                        </div>                        <div class="title-mes">                            <span class="pull-left">当前课程：{{curCouse}}</span><span class="text-center"><button class="btn btn-primary"  v-on:click="startCall"  v-bind:disabled="isNoStudents" >{{cal_text}}</button></span><span class="pull-right" id="time">{{time}}</span>                        </div>                        <br/>                        <ul class="today-call" v-if="!isNoStudents2">                            <li v-for="(student, index) in students" :class="{recall : !student.call}">{{student.call ? student.message+"已到" : student.message+"未到"}} <button class="btn" v-if="!student.call" v-bind:data-index="index" v-on:click="recall">补到</button></li>                        </ul>                        <div class="ifNostudent" v-if="isNoStudents2">当前无学生</div>                        <hr/>                    </div>                    <div class="next-course"><span>{{nextCourse=="今日已无课程" ? nextCourse : "下一节课："+nextCourse}}</span></div>                    <div class="today-course-title">今日课程</div>                        <ul class="today-course" id="ctodayCourse">                            <li v-for="(todayCourse, index) in todayCouses" v-bind:class="{'today-course-cur':todayCourse.isCurCourse}" v-bind:title="todayCourse.isCurCourse+''">{{todayCourse.name}} <span class="li-time">{{period[index]}}</span></li>                        </ul>                    <div class="camera pull-right">                        <div id="camera-img" class="camera-img">                            <img src="images/camera.jpg" alt="" class="camera_target"  id="img2"/>                            <div class="camera_bg"></div>                        </div>                        <div class="btn-group">                            <button class="btn btn-primary btn-camera-switch" onclick="open_camera()">{{camera_btn}}</button>                            <button class="btn btn-warning btn-camera-shoot" @click="shoot">拍照</button>                        </div>                    </div>                </div>                <br/>                <!--<form class="form-inline">-->                    <!--<input type="text" class="form-control" onblur="readcard(this.value)" placeholder="输入后移出鼠标模拟刷卡"/>-->                <!--</form>-->            </div>            <!--考勤历史-->            <div class="content-box-large panel" id="record">                <div class="panel-body">                    <br/>                    <!--查看考勤历史列表-->                    <a class="pull-left add-his-course list-his-course"  data-toggle="modal" data-target="#showHisModal"><i class="glyphicon glyphicon glyphicon-list"></i></a>                    <!--添加历史考勤-->                    <a class="pull-right add-his-course"  data-toggle="modal" data-target="#addHisModal"><i class="glyphicon glyphicon-plus"></i></a>                    <div class="row text-center">                        <div class="datePicker">                            <span>选择查看从</span>                            <div class="input-group date selectDate">                                <input type="text" class="form-control date-input" id="myday" readonly v-bind:value="querydate">                                <div class="input-group-addon">                                    <span class="glyphicon glyphicon-th date-addon" ></span>                                </div>                            </div>                            <span>起七天内的考勤历史</span>                        </div>                    </div>                    <br/>                    <div class="row">                        <div class="col-md-1 col-xs-1"></div>                        <div class="col-md-10 col-xs-10">                            <table class="table table-striped course-table" id="histable">                                <thead>                                <th>&nbsp;&nbsp;&nbsp;&nbsp;</th>                                <th v-for="date in query_dates">{{date.date}}<br/>{{date.week}}</th>                                </thead>                                <tbody>                                <tr>                                    <td>第一节</td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                </tr>                                <tr>                                    <td>第二节</td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                </tr>                                <tr>                                    <td>第三节</td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                </tr>                                <tr>                                    <td>第四节</td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                </tr>                                <tr>                                    <td>第五节</td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                </tr>                                <tr>                                    <td>第六节</td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                </tr>                                <tr>                                    <td>第七节</td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                </tr>                                <tr>                                    <td>第八节</td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                    <td><a>-</a></td>                                </tr>                                </tbody>                            </table>                        </div>                    </div>                </div>            </div>            <!--数据配置-->            <div class="content-box-large panel" id="config">                <div class="panel-body">                    <span class="panel-title">录入课表</span>                    <hr/>                    <div class="row">                        <div class="col-md-1 col-xs-1"></div>                        <div class="col-md-10 col-xs-10">                            <table class="table table-striped course-table" id="curtable">                                <thead>                                <th>&nbsp;&nbsp;&nbsp;&nbsp;</th>                                <th>星期一</th>                                <th>星期二</th>                                <th>星期三</th>                                <th>星期四</th>                                <th>星期五</th>                                </thead>                                <tbody v-on:keyup="courseSave">                                <tr v-for="(course, index) in courses" v-bind:data-index="index">                                    <td>{{course.week}}</td>                                    <td v-for="(i, index) in course.course"><a contenteditable="plaintext-only" v-bind:data-index="index">{{i.name}}</a></td>                                </tr>                                </tbody>                            </table>                        </div>                    </div>                    <br/>                    <span class="panel-title">考勤学生名单</span>                    <!--添加历史考勤-->                    <a class="pull-right add-his-course"  data-toggle="modal" data-target="#addStuModal" v-if="studentsAll"><i class="glyphicon glyphicon-plus"></i></a>                    <hr/>                    <ul id="peoples" @click="delNew">                        <li class="people" v-for="(item, index) in items"><span class="stu_name">{{ item.message }}</span>&nbsp;&nbsp;<span class="stu_rfid">{{item.rfid}}</span><i v-bind:title="index">&times;</i></li>                    </ul>                </div>                <!--模态框：添加考勤历史-->                <div class="modal fade newModal " tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" id="addStuModal">                    <div class="modal-dialog">                        <div class="modal-content">                            <div class="modal-header">                                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                                <h4 class="modal-title">添加考勤学生</h4>                            </div>                            <div class="modal-body">                                <form action="" class="form-horizontal">                                    <div class="form-group">                                        <label for="addName" class="col-sm-3 control-label">姓名</label>                                        <div class="col-sm-6">                                            <input type="text" class="form-control" id="addName" name="name" v-model="addName" placeholder="如：张飞">                                        </div>                                    </div>                                    <div class="form-group">                                        <label for="addRfid" class="col-sm-3 control-label">卡号</label>                                        <div class="col-sm-6">                                            <input type="text" class="form-control" id="addRfid" name="name" v-model="addRfid" placeholder="如：12345">                                        </div>                                    </div>                                </form>                            </div>                            <div class="modal-footer">                                <button type="button" class="btn btn-warning"  @click="addNew">添加</button>                            </div>                        </div>                    </div>                </div>            </div>            <!--连接设置-->            <div class="content-box-large panel" id="set">                <div class="panel-heading">                    <ul id="myTab" class="nav nav-tabs ">                        <li class="active" id="idSetLi"><a href="#/set/idSet" >ID与KEY</a></li>                        <li id="macSetLi"><a href="#/set/macSet" >mac地址</a></li>                        <li id="cameraSetLi"><a href="#/set/cameraSet" >监控摄像头</a></li>                        <li id="versionLi"><a href="#/set/version" >版本信息</a></li>                    </ul>                </div>                <div class="panel-body">                    <div class="page-tab" id="idSet">                        <form class="form-horizontal">                            <div class="form-group">                                <label for="id" class="col-sm-4 control-label">ID</label>                                <div class="col-sm-4">                                    <input type="text" class="form-control" id="id" placeholder="1234567890" v-model="set_connect.id">                                </div>                            </div>                            <div class="form-group">                                <label for="key" class="col-sm-4 control-label">KEY</label>                                <div class="col-sm-4">                                    <input type="text" class="form-control" id="key" placeholder="ABCDEFGHIJKLMNOPQRSTUVWXYZ"  v-model="set_connect.key">                                </div>                            </div>                            <div class="form-group">                                <label for="server" class="col-sm-4 control-label">server</label>                                <div class="col-sm-4">                                    <input type="text" class="form-control" id="server" placeholder="api.zhiyun360.com"  v-model="set_connect.server">                                </div>                            </div>                        </form>                        <div class="form-group">                            <div class="col-sm-offset-4 col-sm-2">                                <button type="text" class="btn btn-primary col-sm-12" onclick="get_connect()">{{connect_btn}}</button>                            </div>                        </div>                    </div>                    <div class="page-tab" id="macSet">                        <form class="form-horizontal" >                            <div class="form-group">                                <label for="id" class="col-sm-4 control-label">RFID传感器</label>                                <div class="col-sm-4">                                    <input type="text" class="form-control" id="type_802" placeholder="00:00:00:00:00:00" v-model="set_connect.mac">                                </div>                            </div>                        </form>                    </div>                    <div class="page-tab" id="cameraSet">                        <form class="form-horizontal">                            <div class="form-group">                                <label for="id" class="col-sm-4 control-label">地址</label>                                <div class="col-sm-4">                                    <input type="text" class="form-control" placeholder="Camera:192.168.1.100:81" v-model="set_connect.camera_addr">                                </div>                            </div>                            <div class="form-group">                                <label for="id" class="col-sm-4 control-label">类型</label>                                <div class="col-sm-4">                                    <select name=" " id="cameraSelect" class="form-control" v-model="set_connect.camera_type">                                        <option value="H3-Series">H3-Series</option>                                        <option value="F3-Seriesc">F3-Seriesc</option>                                        <option value="F-Series">F-Series</option>                                    </select>                                </div>                            </div>                            <div class="form-group">                                <label for="id" class="col-sm-4 control-label">用户</label>                                <div class="col-sm-4">                                    <input type="text" class="form-control" placeholder="admin" v-model="set_connect.camera_user">                                </div>                            </div>                            <div class="form-group">                                <label for="id" class="col-sm-4 control-label">密码</label>                                <div class="col-sm-4">                                    <input type="text" class="form-control"  placeholder="admin" v-model="set_connect.camera_pw">                                </div>                            </div>                        </form>                        <div class="form-group">                            <div class="col-sm-offset-4 col-sm-2">                                <button class="btn btn-primary col-sm-12" @click="store_camera">保存</button>                            </div>                        </div>                    </div>                    <div class="page-tab" id="version">                        <p class="text-center">当前版本：<span class="text-red">v1.0.170907</span></p>                        <div class="form-group text-center row">                                <button id="setUp" type="button" class="btn btn-danger btn-block col-md-3 version-btn">版本升级</button>                        </div>                        <div class="form-group text-center row">                                <button type="button" class="btn btn-info btn-block col-md-3 version-btn" id="showUpdateTxt" data-toggle="collapse" data-target="#updateTxt">版本日志</button>                        </div>                        <div class="row">                            <div id="updateTxt" class="collapse text-center">                                <div><b>1.0.170907</b>&nbsp;&nbsp;&nbsp;&nbsp;验证config.js，添加退出确认等</div>                                <div><b>1.0.170802</b>&nbsp;&nbsp;&nbsp;&nbsp;完成初版</div>                                <br/>                                <button class="btn btn-default" onclick="clearLocalStorage()">清除localStorage</button>                            </div>                        </div>                    </div>                </div>            </div>        </div>    </div></div><!--模态框：当前历史课程详情 窗口--><div class="modal fade newModal " id="courseModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title">考勤详情</h4>            </div>            <div class="modal-body">                课程日期：{{his_date}}                <hr/>                课程节数：{{his_index}}                <hr/>                课程时间：{{his_time}}                <hr/>                课程名称：{{his_course}}                <hr/>                <!--课程考勤：已到-人，未到-人，应到-人-->                课程考勤：{{his_mes}}                <hr/>                <ul class="today-call">                    <li v-for="(student, index) in students" :class="{recall : !student.hiscall}">{{student.hiscall ? student.message+"已到" : student.message+"未到"}} </li>                </ul>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-warning" id="courseConfirm"  data-dismiss="modal">确认</button>            </div>        </div>    </div></div><!--模态框：添加考勤历史--><div class="modal fade newModal " tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" id="addHisModal">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title">添加考勤历史（不推荐使用此功能）</h4>            </div>            <div class="modal-body">                <form action="" class="form-horizontal">                    <div class="form-group">                        <label for="add_name" class="col-sm-3 control-label">课程名</label>                        <div class="col-sm-6">                            <input type="text" class="form-control" id="add_name" name="name" v-model="add_name" placeholder="如：数学">                        </div>                    </div>                    <div class="form-group">                        <label for="add_index" class="col-sm-3 control-label">节数</label>                        <div class="col-sm-6">                            <input type="text" class="form-control" id="add_index" name="name" v-model="add_index" placeholder="如：2">                        </div>                    </div>                    <div class="form-group">                        <label for="add_date" class="col-sm-3 control-label">日期</label>                        <div class="col-sm-6">                            <input type="text" class="form-control" id="add_date" name="name" v-model="add_date" placeholder="如：2017-07-07">                        </div>                    </div>                    <div class="form-group">                        <label for="add_people" class="col-sm-3 control-label">考勤率</label>                        <div class="col-sm-6">                            <input type="text" class="form-control" id="add_people" name="name" v-model="add_people" placeholder="如：12/12">                        </div>                    </div>                    <div class="form-group">                        <label for="add_sign" class="col-sm-3 control-label">实到人</label>                        <div class="col-sm-6">                            <input type="text" class="form-control" id="add_sign" name="name" v-model="add_sign" placeholder="如：如：张飞 关羽">                        </div>                    </div>                    <div class="form-group">                        <label for="add_absent" class="col-sm-3 control-label">考勤率</label>                        <div class="col-sm-6">                            <input type="text" class="form-control" id="add_absent" name="name" v-model="add_absent" placeholder="如：刘备 曹操">                        </div>                    </div>                </form>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-warning"  data-dismiss="modal" @click="addHisCourse">添加</button>            </div>        </div>    </div></div><!--模态框：考勤历史列表--><div class="modal fade newModal his-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" id="showHisModal">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title">考勤历史列表</h4>            </div>            <div class="modal-body">                <div id="test" class="his-modal-div">                    <table class="table  table-striped">                        <thead>                        <th>课程</th>                        <th>节数</th>                        <th>日期</th>                        <th>出勤率</th>                        <th>实到人</th>                        <th>未到人</th>                        </thead>                        <tbody>                        </tbody>                    </table>                </div>                <!--列表数据模板 -->                <script id="tplList" type="text/template">                    <tr>                        <td data-key="name" data-id="$id$" contenteditable="plaintext-only">$name$</td>                        <td data-key="index" data-id="$id$" contenteditable="plaintext-only">$index$</td>                        <td data-key="date" data-id="$id$" contenteditable="plaintext-only">$date$</td>                        <td data-key="people" data-id="$id$" contenteditable="plaintext-only">$people$</td>                        <td data-key="sign" data-id="$id$" contenteditable="plaintext-only">$sign$</td>                        <td data-key="absent" data-id="$id$" contenteditable="plaintext-only">$absent$</td>                        <td><a href="javascript:" role="button" class="jsListDel" data-id="$id$">删除</a></td>                    </tr>                </script>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-warning"  data-dismiss="modal" @click="addHisCourse">添加</button>            </div>        </div>    </div></div><!--小弹窗--><div id="toast">	<span id="toast_txt">	</span></div><!--模态框：刷卡信息--><div class="modal fade imgModal" id="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title">刷卡信息：</h4>            </div>            <div class="modal-body">                <div class="rfid-mass">	<span id="message" class="rfid-mass"></span></div>            </div>        </div>    </div></div><!--模态框：确认退出--><div class="modal fade imgModal back-modal" id="backModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-keyboard="false"  data-backdrop="static">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only"></span></button>                <h4 class="modal-title back-text" >确定退出程序？</h4>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-danger" id="confirm_back" onclick="confirm_back()">确认</button>                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>            </div>        </div>    </div></div></body></html>